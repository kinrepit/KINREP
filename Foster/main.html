<!DOCTYPE HTML>
<html>
<head>
    <title>FOSTER</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
    <!-- Custom CSS -->
    <link href="css/style.css" rel='stylesheet' type='text/css' />
    <!-- font-awesome icons -->
    <link href="css/font-awesome.css" rel="stylesheet">
    <!-- //font-awesome icons -->
    <!-- js-->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/modernizr.custom.js"></script>
    <!--webfonts-->
    <link href='//fonts.googleapis.com/css?family=Comfortaa:400,700,300' rel='stylesheet'
        type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Muli:400,300,300italic,400italic' rel='stylesheet'
        type='text/css'>
    <!--//webfonts-->
    <!-- Metis Menu -->
    <script language="javascript" type="text/javascript" src="js/metisMenu.min.js"></script>
    <script language="javascript" type="text/javascript" src="js/custom.js"></script>
    <link href="css/custom.css" rel="stylesheet">
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" charset="utf-8">
        document.addEventListener("deviceready", onDeviceReady, false);
        var watchID = null;

        function onDeviceReady() {
            var options = { timeout: 300000 }; // Track Geo Location for every 5 Min.
            watchID = navigator.geolocation.watchPosition(onSuccess, onError, options);
        }

        function onSuccess(position) {
            var lat = position.coords.latitude;
            var lng = position.coords.longitude;

            var latlng = new google.maps.LatLng(lat, lng);
            var geocoder = geocoder = new google.maps.Geocoder();
            geocoder.geocode({ 'latLng': latlng }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    if (results[1]) {
                        var element = document.getElementById('geolocation');
                        element.innerHTML = 'Latitude: ' + position.coords.latitude + '<br />' +
                            'Longitude: ' + position.coords.longitude + '<br />' +
                            'Address : ' + results[1].formatted_address + '<br/>' +
                            '<hr />' + element.innerHTML;
                    }
                }
            });
        }

        function onError(error) {
            alert('code: ' + error.code + '\n' +
              'message: ' + error.message + '\n');
        }

    </script>
    <!--//Metis Menu -->
</head>
<body class="cbp-spmenu-push">
    <div class="main-content">
        <!--left-fixed -navigation-->
        <div class="sidebar" role="navigation">
            <div class="navbar-collapse">
                <nav class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-right dev-page-sidebar mCustomScrollbar _mCS_1 mCS-autoHide mCS_no_scrollbar"
                    id="cbp-spmenu-s1">
					<div class="scrollbar scrollbar1">
						<ul class="nav" id="side-menu">
							<li>
								<a href="main.html"><i class="fa fa-home nav_icon"></i>Home</a>
							</li>
							<li>
								<a href="cheque-pickup.html"><i class="fa fa-magnet nav_icon"></i>Pickup Schedule</a></li>
							<li>
								<a href="PickupCompleted.html"><i class="fa fa-check-square nav_icon"></i>Pickup Completed</a></li>
							<li>
								<a href="Deposit.html"><i class="fa fa-bullhorn nav_icon"></i>Deposit Pending</a>
							</li>
							<li>
								<a href="ReturnedCheques.html"><i class="fa fa-reply nav_icon"></i>Returned Cheques</a>
							</li>
							<li>
								<a href="DueDispatch.html"><i class="fa fa-truck nav_icon"></i>Due for Dispatch</a>
							</li>
						</ul>
					</div>
					<!-- //sidebar-collapse -->
				</nav>
            </div>
        </div>
        <!--left-fixed -navigation-->
        <!-- header-starts -->
        <div class="sticky-header header-section ">
            <div class="header-left">
                <!--logo -->
                <div class="logo">
                    <a href="index.html">
                        <img src="images/logo.png" /></a>
                </div>
                <!--//logo-->
                <div class="user-right">
                    <button id="showLeftPush">
                        <i class="fa fa-bars"></i>
                    </button>
                </div>
                <div class="clearfix">
                </div>
            </div>
        </div>
        <!-- //header-ends -->
        <div id="page-wrapper">
            <div class="main-page">
                <div class="appearance">
                    <div class="col-md-12">
                        <span id="spnApp"></span>
                    </div>
                    <div class="clearfix">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--typo-ends-->
    <p id="geolocation">
        Watching geolocation...</p>
    <div class="copy-section">
        <p>
            &copy; 2016 FOSTER</p>
    </div>
    <!-- Classie -->
    <script language="javascript" type="text/javascript" src="js/classie.js"></script>
    <script language="javascript" type="text/javascript">
        var menuLeft = document.getElementById('cbp-spmenu-s1'),
						showLeftPush = document.getElementById('showLeftPush'),
						body = document.body;

        showLeftPush.onclick = function () {
            classie.toggle(this, 'active');
            classie.toggle(body, 'cbp-spmenu-push-toright');
            classie.toggle(menuLeft, 'cbp-spmenu-open');
            disableOther('showLeftPush');
        };

        function disableOther(button) {
            if (button !== 'showLeftPush') {
                classie.toggle(showLeftPush, 'disabled');
            }
        }

        var sFosCode = localStorage.getItem("FOSCode");

        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onload = function () {
        }
        xmlhttp.onerror = function () {
            $('#laoderimg').hide();
            alert("Check Your Network Connection");
        }

        xmlhttp.open("POST", "https://www.kinrep.com/foster/ws/VirtualRoomService.asmx", true);
        xmlhttp.setRequestHeader("SOAPAction", "http://tempuri.org/getFOSAssignments");
        xmlhttp.setRequestHeader("Content-Type", "text/xml;charset=UTF-8");
        xmlhttp.setRequestHeader("Cache-Control", "no-cache");

        var xml = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">' +
                                '<soapenv:Header/>' +
                                '<soapenv:Body>' +
                                '<tem:getFOSAssignments>' +
                                '<tem:foscode>222222</tem:foscode>' +
                                '</tem:getFOSAssignments>' +
                                '</soapenv:Body>' +
                                '</soapenv:Envelope>';
        xmlhttp.send(xml);

        xmlhttp.onreadystatechange = function () {
            var response = xmlhttp.responseText;
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var result = $(response).find("getFOSAssignmentsResult").text();
                if (result == "NoData") {
                }
                else {
                    var objPF = JSON.parse(result);
                    var dRows = objPF.length;
                    var sApp = '';

                    sApp += '<table class="table table-bordered">';
                    sApp += '<thead>';
                    sApp += '<tr>';
                    sApp += '<th>';
                    sApp += 'Customer Name';
                    sApp += '</th>';
                    sApp += '<th>';
                    sApp += 'Appointment Time';
                    sApp += '</th>';
                    sApp += '</tr>';
                    sApp += '</thead>';

                    sApp += '<tbody>';
                    for (var i = 0; i < dRows; i++) {
                        sApp += '<tr>';
                        sApp += '<td>';
                        sApp += objPF[i]["owner_name"];
                        sApp += '</td>';
                        sApp += '<td>';
                        sApp += objPF[i]["appointment_date"] + ' ' + objPF[i]["appointment_time"]; //'<span class="badge badge-danger"><a href="#">TODAY</a></span>';
                        sApp += '</td>';
                        sApp += '</tr>';
                    }
                    sApp += '</tbody>';
                    sApp += '</table>';

                    document.getElementById('spnApp').innerHTML = sApp;
                }
            }
        };

        $(function () {
            Page.init();
        });
    </script>
    <!-- Bootstrap Core JavaScript -->
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <!--scrolling js-->
    <script src="js/jquery.nicescroll.js"></script>
    <script src="js/scripts.js"></script>
    <!--//scrolling js-->
</body>
</html>
